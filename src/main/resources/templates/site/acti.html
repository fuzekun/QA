<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"> 
    <head> 
        <meta charset="utf-8" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /> 
        <link rel="icon" href="https://static.nowcoder.com/images/logo_87_87.png" />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous" /> 
        <link rel="stylesheet" th:href="@{/css/global.css}" /> 
        <link rel="stylesheet" th:href="@{/css/letter.css}" />
        <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/layui/2.6.8/css/layui.min.css">

        <title>PQA-活动列表</title>
    </head> 
    <body> 
        <div class="nk-container"> <!-- 头部 --> 
            <header class="bg-dark sticky-top" th:replace="index::header"> 
                <div class="container"> <!-- 导航 --> 
                    <nav class="navbar navbar-expand-lg navbar-dark"> <!-- logo --> <a class="navbar-brand" href="#"></a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button> <!-- 功能 --> 
                        <div class="collapse navbar-collapse" id="navbarSupportedContent"> 
                            <ul class="navbar-nav mr-auto"> 
                              <li class="nav-item ml-3 btn-group-vertical"> <a class="nav-link" href="../index.html">首页</a> </li> 
                              <li class="nav-item ml-3 btn-group-vertical"> <a class="nav-link position-relative" href="letter.html">消息<span class="badge badge-danger">12</span></a> </li> 
                              <li class="nav-item ml-3 btn-group-vertical"> <a class="nav-link" href="register.html">注册</a> </li> 
                              <li class="nav-item ml-3 btn-group-vertical"> <a class="nav-link" href="login.html">登录</a> </li> 
                              <li class="nav-item ml-3 btn-group-vertical dropdown"> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <img src="http://images.nowcoder.com/head/1t.png" class="rounded-circle" style="width:30px;" /> </a> 
                              <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-item text-center" href="profile.html">个人主页</a> <a class="dropdown-item text-center" href="setting.html">账号设置</a> <a class="dropdown-item text-center" href="login.html">退出登录</a> 
                              <div class="dropdown-divider"></div> <span class="dropdown-item text-center text-secondary">nowcoder</span> 
                              </div> </li> 
                            </ul> <!-- 搜索 --> 
                            <form class="form-inline my-2 my-lg-0" action="search.html"> 
                              <input class="form-control mr-sm-2" type="search" aria-label="Search" /> <button class="btn btn-outline-light my-2 my-sm-0" type="submit">搜索</button> 
                            </form> 
                        </div> 
                    </nav> 
                </div> 
            </header> <!-- 内容 --> 
            <div class="main"> 
                <div class="container">
                    <div class="layuimini-main">
                        <table id="mytable" lay-filter="mytable"></table>
                        <script type="text/html" id="toolbar">
                            <a class="layui-btn layui-btn-sm" lay-event="edit">编辑</a>
                            <a class="layui-btn layui-btn-danger layui-btn-sm" lay-event="delete">删除</a>
                        </script>
                    </div>
                </div>
            </div> <!-- 尾部 --> 
            <footer class="bg-dark" th:replace="index::footer"> 
                <div class="container"> 
                    <div class="row"> <!-- 二维码 --> 
                        <div class="col-4 qrcode"> 
                            <img src="http://qiniu.fuzekun.top/image-20230713163923900.png" class="img-thumbnail" style="width:136px;" /> 
                        </div> <!-- 公司信息 --> 
                        <div class="col-8 detail-info"> 
                            <div class="row"> 
                              <div class="col"> 
                              <ul class="nav"> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">关于我们</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">加入我们</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">意见反馈</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">企业服务</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">联系我们</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">免责声明</a> </li> 
                              <li class="nav-item"> <a class="nav-link text-light" href="#">友情链接</a> </li> 
                              </ul> 
                              </div> 
                            </div> 
                            <div class="row"> 
                              <div class="col"> 
                              <ul class="nav btn-group-vertical company-info"> 
                              <li class="nav-item text-white-50"> 公司地址：北京市朝阳区大屯路东金泉时代3-2708北京牛客科技有限公司 </li> 
                              <li class="nav-item text-white-50"> 联系方式：010-60728802(电话)&#xa0;&#xa0;&#xa0;&#xa0;admin@nowcoder.com </li> 
                              <li class="nav-item text-white-50"> 牛客科技©2018 All rights reserved </li> 
                              <li class="nav-item text-white-50"> 京ICP备14055008号-4 &#xa0;&#xa0;&#xa0;&#xa0; <img src="http://static.nowcoder.com/company/images/res/ghs.png" style="width:18px;" /> 京公网安备 11010502036488号 </li> 
                              </ul> 
                              </div> 
                            </div> 
                        </div> 
                    </div> 
                </div> 
            </footer> 
        </div> 
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" crossorigin="anonymous"></script> 
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script> 
        <script th:src="@{/js/global.js}"></script> 
        <script th:src="@{/js/letter.js}"></script>
        <script src="https://cdn.bootcdn.net/ajax/libs/layui/2.6.8/layui.min.js"></script>
    </body>
</html>
<script th:inline="javascript">
    $.ajax({
        url: 'http://localhost:8082/api/activity/queryActivityListPage',
        type: 'GET',
        xhrFields: {
            withCredentials: true // 允许跨域请求携带 Cookie
        },
        crossDomain: true, // 允许跨域请求
        dataType: 'json',
        success: function(data) {
            // 将数据渲染到表格中
            layui.table.render({
                elem: '#mytable',
                cols: [[
                    {type: "checkbox", width: 50, fixed: "left"},
                    {field:'activityId',width:100, title:'活动ID'},
                    {field:'activityName',width:120, title:'活动名称'},
                    {field:'beginDateTime',width:200, title:'开始时间'},
                    {field:'endDateTime',width:200, title:'结束时间'},
                    // {field:'stockCount',width:120, title:'库存'},
                    // {field:'stockSurplusCount',width:100, title:'剩余库存'},
                    // {field:'strategyId',width:100, title:'抽奖策略ID'},
                    {field:'creator',width:100, title:'创建人'},
                    {field:'state',width:60, title:'状态', align: 'center', templet: function (d) {
                            // 活动状态：1编辑、2提审、3撤审、4通过、5运行(审核通过后worker扫描状态)、6拒绝、7关闭、8开启
                            if(d.state === 1) return '编辑';
                            if(d.state === 2) return '提升';
                            if(d.state === 3) return '撤审';
                            if(d.state === 4) return '通过';
                            if(d.state === 5) return '运行';
                            if(d.state === 6) return '拒绝';
                            if(d.state === 7) return '关闭';
                            if(d.state === 8) return '开启';
                        }},
                    // {field:'createTime',width:200, title:'创建时间'},
                    // {field:'updateTime',width:200, title:'修改时间'},
                ]],
                data: data.data,
                limits: [10, 25, 50, 100],
                limit: 10,
                page: true
            });
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log('Error:', textStatus, errorThrown);
        }
    });
</script>
